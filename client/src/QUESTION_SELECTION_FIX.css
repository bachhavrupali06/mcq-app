/* ================================================================
   QUESTION SELECTION MODAL FIX
   Makes the "Select Questions for Exam" modal fullscreen and dark mode compatible
   ================================================================ */

/* ================================================================
   1. FULLSCREEN MODAL FOR QUESTION SELECTION
   ================================================================ */

/* Make question selection modal OVERLAY appear on top of everything */
.modal[style*="z-index: 1050"],
.modal[style*="zIndex: 1050"],
.modal[style*="1050"],
div.modal[style*="1050"] {
  z-index: 99999 !important;
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  background: rgba(0, 0, 0, 0.75) !important;
  backdrop-filter: blur(4px) !important;
}

/* Make question selection modal fullscreen or near-fullscreen */
.modal[style*="z-index: 1050"] .modal-content,
.modal[style*="1050"] .modal-content {
  max-width: 95vw !important;
  max-height: 95vh !important;
  width: 95vw !important;
  height: 95vh !important;
  margin: auto !important;
  display: flex !important;
  flex-direction: column !important;
  z-index: 100000 !important;
  position: relative !important;
}

/* Even more specific targeting */
div.modal[style*="1050"] > div.modal-content {
  max-width: 95vw !important;
  max-height: 95vh !important;
  width: 95vw !important;
  height: 95vh !important;
  z-index: 100000 !important;
}

/* Ensure modal body can scroll */
.modal[style*="z-index: 1050"] .modal-body,
.modal[style*="1050"] .modal-body {
  flex: 1 !important;
  overflow-y: auto !important;
  padding: 1.5rem !important;
  min-height: 0 !important; /* Important for flex scrolling */
  max-height: calc(95vh - 120px) !important; /* Header + footer space */
}

/* Make modal header stick to top */
.modal[style*="z-index: 1050"] .modal-header {
  flex-shrink: 0 !important;
  position: sticky !important;
  top: 0 !important;
  z-index: 10 !important;
  background: var(--card-bg) !important;
  border-bottom: 1px solid var(--border-light) !important;
}

/* Make modal footer stick to bottom */
.modal[style*="z-index: 1050"] .modal-footer {
  flex-shrink: 0 !important;
  position: sticky !important;
  bottom: 0 !important;
  z-index: 10 !important;
  background: var(--card-bg) !important;
  border-top: 1px solid var(--border-light) !important;
}

/* ================================================================
   2. DARK MODE - FILTER SECTION
   ================================================================ */

/* Filter container dark mode */
[data-theme="dark"] .modal-body > div[style*="background: #f8f9fa"] {
  background: #1e293b !important;
  border-color: #334155 !important;
}

/* Filter labels dark mode */
[data-theme="dark"] .modal-body label[style*="fontWeight: '600'"],
[data-theme="dark"] .modal-body label[style*="font-weight: '600'"] {
  color: #f1f5f9 !important;
}

/* ================================================================
   3. DARK MODE - EMPTY STATES
   ================================================================ */

/* "Select a Subject First" message */
[data-theme="dark"] .modal-body > div > div[style*="background: #f8f9fa"] {
  background: #1e293b !important;
  border-color: #334155 !important;
  color: #cbd5e1 !important;
}

[data-theme="dark"] .modal-body > div > div[style*="background: #f8f9fa"] h4 {
  color: #f1f5f9 !important;
}

[data-theme="dark"] .modal-body > div > div[style*="background: #f8f9fa"] p {
  color: #94a3b8 !important;
}

/* "No Questions Found" warning */
[data-theme="dark"] .modal-body > div > div[style*="background: #fff3cd"] {
  background: #422006 !important;
  border-color: #78350f !important;
  color: #fbbf24 !important;
}

[data-theme="dark"] .modal-body > div > div[style*="background: #fff3cd"] h4 {
  color: #fcd34d !important;
}

[data-theme="dark"] .modal-body > div > div[style*="background: #fff3cd"] p {
  color: #fde68a !important;
}

/* ================================================================
   4. DARK MODE - QUESTION COUNT HEADER
   ================================================================ */

/* Blue info banner with question count */
[data-theme="dark"] .modal-body > div > div > div[style*="background: #e3f2fd"] {
  background: #1e3a5f !important;
  border-color: #2563eb !important;
}

[data-theme="dark"] .modal-body > div > div > div[style*="background: #e3f2fd"] span {
  color: #93c5fd !important;
}

/* ================================================================
   5. DARK MODE - QUESTIONS LIST CONTAINER
   ================================================================ */

/* Questions list scrollable container */
[data-theme="dark"] .modal-body > div > div > div[style*="background: white"] {
  background: #0f172a !important;
  border-color: #334155 !important;
}

/* ================================================================
   6. DARK MODE - INDIVIDUAL QUESTION ITEMS
   ================================================================ */

/* Individual question rows */
[data-theme="dark"] .modal-body > div > div > div > div[style*="padding: 1rem"] {
  border-bottom-color: #1e293b !important;
}

/* Question text - Multiple selectors for better coverage */
[data-theme="dark"] .modal-body > div > div > div > div > div > div[style*="color: #333"],
[data-theme="dark"] .modal-body div[style*="color: #333"],
[data-theme="dark"] .modal div[style*="color: #333"],
[data-theme="dark"] div[style*="color: #333"] {
  color: #f1f5f9 !important;
}

/* Question metadata (Subject, Category, Answer) */
[data-theme="dark"] .modal-body > div > div > div > div > div > div[style*="color: #666"] {
  color: #94a3b8 !important;
}

[data-theme="dark"] .modal-body > div > div > div > div > div > div[style*="color: #666"] strong {
  color: #cbd5e1 !important;
}

/* Selected question background */
[data-theme="dark"] .modal-body > div > div > div > div[style*="background: #f0f8ff"] {
  background: #1e3a5f !important;
}

/* Unselected question hover */
[data-theme="dark"] .modal-body > div > div > div > div[style*="background: transparent"]:hover {
  background: #1e293b !important;
}

/* ================================================================
   7. DARK MODE - BUTTONS
   ================================================================ */

/* Select All button (green) - already has inline color, just ensure visibility */
[data-theme="dark"] button[style*="background: #28a745"] {
  background: #16a34a !important;
  color: #ffffff !important;
}

/* Deselect All button (red) - already has inline color, just ensure visibility */
[data-theme="dark"] button[style*="background: #dc3545"] {
  background: #dc2626 !important;
  color: #ffffff !important;
}

/* ================================================================
   8. CHECKBOXES STYLING - ENHANCED FOR DARK MODE
   ================================================================ */

/* Checkbox styling for better visibility */
input[type="checkbox"][style*="scale(1.2)"] {
  accent-color: var(--btn-primary-bg, #667eea) !important;
  cursor: pointer !important;
  width: 18px !important;
  height: 18px !important;
}

/* Dark mode checkboxes - HIGH VISIBILITY */
[data-theme="dark"] input[type="checkbox"][style*="scale(1.2)"] {
  accent-color: #667eea !important;
  filter: brightness(1.2) !important;
  background-color: #1e293b !important;
  border: 2px solid #667eea !important;
}

/* Checked state in dark mode - EXTRA VISIBILITY */
[data-theme="dark"] input[type="checkbox"][style*="scale(1.2)"]:checked {
  accent-color: #818cf8 !important;
  filter: brightness(1.4) saturate(1.3) !important;
  border-color: #818cf8 !important;
  box-shadow: 0 0 8px rgba(129, 140, 248, 0.5) !important;
}

/* Hover state for checkboxes in dark mode */
[data-theme="dark"] input[type="checkbox"][style*="scale(1.2)"]:hover {
  filter: brightness(1.3) !important;
  box-shadow: 0 0 6px rgba(102, 126, 234, 0.4) !important;
}

/* ================================================================
   9. SCROLLBAR STYLING
   ================================================================ */

/* Custom scrollbar for questions list */
.modal-body > div > div > div[style*="maxHeight: '400px'"],
.modal-body > div > div > div[style*="max-height: 400px"] {
  scrollbar-width: thin;
  scrollbar-color: var(--border-light) transparent;
}

.modal-body > div > div > div[style*="maxHeight: '400px'"]::-webkit-scrollbar,
.modal-body > div > div > div[style*="max-height: 400px"]::-webkit-scrollbar {
  width: 8px;
}

.modal-body > div > div > div[style*="maxHeight: '400px'"]::-webkit-scrollbar-track,
.modal-body > div > div > div[style*="max-height: 400px"]::-webkit-scrollbar-track {
  background: transparent;
}

.modal-body > div > div > div[style*="maxHeight: '400px'"]::-webkit-scrollbar-thumb,
.modal-body > div > div > div[style*="max-height: 400px"]::-webkit-scrollbar-thumb {
  background-color: var(--border-light);
  border-radius: 4px;
}

[data-theme="dark"] .modal-body > div > div > div[style*="maxHeight: '400px'"]::-webkit-scrollbar-thumb,
[data-theme="dark"] .modal-body > div > div > div[style*="max-height: 400px"]::-webkit-scrollbar-thumb {
  background-color: #475569;
}

/* ================================================================
   10. IMPROVE QUESTIONS LIST HEIGHT
   ================================================================ */

/* Increase questions list max height for better viewing */
.modal-body > div > div > div[style*="maxHeight: '400px'"],
.modal-body > div > div > div[style*="max-height: 400px"] {
  max-height: 60vh !important;
  min-height: 300px !important;
}

/* ================================================================
   11. MOBILE RESPONSIVE
   ================================================================ */

@media (max-width: 768px) {
  /* Fullscreen on mobile */
  .modal[style*="z-index: 1050"] .modal-content {
    max-width: 100vw !important;
    max-height: 100vh !important;
    width: 100vw !important;
    height: 100vh !important;
    border-radius: 0 !important;
  }
  
  /* Adjust padding for mobile */
  .modal[style*="z-index: 1050"] .modal-body {
    padding: 1rem !important;
  }
  
  /* Stack filters vertically on mobile */
  .modal-body > div[style*="gridTemplateColumns: '1fr 1fr'"] {
    grid-template-columns: 1fr !important;
  }
}

/* ================================================================
   12. ANIMATION FOR SMOOTH OPENING
   ================================================================ */

/* Smooth fade-in for question selection modal */
.modal[style*="z-index: 1050"] {
  animation: fadeIn 0.2s ease-out !important;
}

.modal[style*="z-index: 1050"] .modal-content {
  animation: modalSlideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
}

/* ================================================================
   13. ACCESSIBILITY - FOCUS STATES
   ================================================================ */

/* Checkbox focus ring */
input[type="checkbox"][style*="scale(1.2)"]:focus {
  outline: 2px solid var(--btn-primary-bg) !important;
  outline-offset: 2px !important;
}

/* Button focus states */
button[style*="background: #28a745"]:focus,
button[style*="background: #dc3545"]:focus {
  outline: 2px solid currentColor !important;
  outline-offset: 2px !important;
}

/* ================================================================
   14. PRINT STYLES (Hide modal in print)
   ================================================================ */

@media print {
  .modal[style*="z-index: 1050"] {
    display: none !important;
  }
}

/* ================================================================
   15. HIGH CONTRAST MODE SUPPORT
   ================================================================ */

@media (prefers-contrast: high) {
  .modal-body > div > div > div > div {
    border-width: 2px !important;
  }
  
  input[type="checkbox"][style*="scale(1.2)"] {
    border: 2px solid currentColor !important;
  }
}

/* ================================================================
   16. SELECTED QUESTIONS SUMMARY BOX (in Create Exam modal)
   ================================================================ */

/* Dark mode for "Selected Questions" summary box in main exam form */
[data-theme="dark"] .form-group > div[style*="border: 2px dashed"],
[data-theme="dark"] .form-group > div[style*="border: '2px dashed"] {
  border-color: #334155 !important;
  background: #1e293b !important;
}

[data-theme="dark"] .form-group > div[style*="border: 2px dashed"] h4,
[data-theme="dark"] .form-group > div[style*="border: '2px dashed"] h4 {
  color: #f1f5f9 !important;
}

[data-theme="dark"] .form-group > div[style*="border: 2px dashed"] p,
[data-theme="dark"] .form-group > div[style*="border: '2px dashed"] p {
  color: #94a3b8 !important;
}

/* Selected count badge */
[data-theme="dark"] .form-group > div > div[style*="background: #e3f2fd"] {
  background: #1e3a5f !important;
  border-color: #2563eb !important;
}

[data-theme="dark"] .form-group > div > div[style*="background: #e3f2fd"] span {
  color: #93c5fd !important;
}

/* ================================================================
   17. CATCH-ALL DARK MODE RULES (Nuclear Option)
   ================================================================ */

/* Force all text in question selection modal to be light in dark mode */
[data-theme="dark"] .modal[style*="1050"] .modal-body,
[data-theme="dark"] .modal[style*="1050"] .modal-body * {
  color: #f1f5f9 !important;
}

/* Override for specific elements that should be different */
[data-theme="dark"] .modal[style*="1050"] .modal-body strong {
  color: #cbd5e1 !important;
}

/* Force fullscreen size (nuclear option) */
.modal[style*="1050"] .modal-content[style*="maxWidth"],
.modal[style*="1050"] .modal-content[style*="max-width"],
.modal[style*="1050"] .modal-content[style*="900px"],
.modal[style*="1050"] .modal-content[style*="90%"] {
  max-width: 95vw !important;
  width: 95vw !important;
}

.modal[style*="1050"] .modal-content,
.modal[style*="1050"] > .modal-content {
  height: 95vh !important;
  max-height: 95vh !important;
  width: 95vw !important;
  max-width: 95vw !important;
}

/* Force white text on all question elements in dark mode */
[data-theme="dark"] .modal[style*="1050"] div[style*="fontSize"],
[data-theme="dark"] .modal[style*="1050"] div[style*="font-size"] {
  color: #f1f5f9 !important;
}

/* ================================================================
   18. PARENT CONTAINER ESCAPE (Critical for Overlay)
   ================================================================ */

/* Ensure parent containers don't trap the modal */
.dashboard-with-sidebar,
.dashboard-main,
.tab-content {
  position: relative !important;
  z-index: auto !important;
}

/* Force modal to escape any container */
div.modal[style*="1050"] {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  z-index: 99999 !important;
  margin: 0 !important;
  padding: 0 !important;
}

/* ================================================================
   19. ULTIMATE CATCH-ALL (Guaranteed to Work)
   ================================================================ */

/* Force modal overlay to appear on top - CRITICAL */
div.modal[style*="zIndex"],
div.modal[style*="1050"] {
  z-index: 99999 !important;
  position: fixed !important;
  inset: 0 !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  background: rgba(0, 0, 0, 0.75) !important;
}

/* Force question selection modal fullscreen - every possible way */
div.modal[style*="zIndex"] div.modal-content,
div.modal[style] div.modal-content[style*="900"],
div.modal div.modal-content[style*="maxWidth"],
.modal .modal-content[style*="Width"] {
  max-width: 95vw !important;
  min-width: 95vw !important;
  width: 95vw !important;
  height: 95vh !important;
  max-height: 95vh !important;
  min-height: 95vh !important;
  z-index: 100000 !important;
  position: relative !important;
}

/* Force all text in modal to be visible in dark mode - nuclear option */
[data-theme="dark"] .modal .modal-body div,
[data-theme="dark"] .modal .modal-body span,
[data-theme="dark"] .modal .modal-body p,
[data-theme="dark"] .modal .modal-body h4,
[data-theme="dark"] .modal .modal-body label {
  color: #f1f5f9 !important;
}

/* ================================================================
   20. COMPREHENSIVE DARK MODE - ALL INLINE STYLES
   ================================================================ */

/* Modal footer dark mode */
[data-theme="dark"] .modal[style*="1050"] .modal-footer {
  background: #1e293b !important;
  border-top-color: #334155 !important;
}

[data-theme="dark"] .modal-footer[style*="background: #f8f9fa"] {
  background: #1e293b !important;
  border-top-color: #334155 !important;
}

/* Footer text in dark mode */
[data-theme="dark"] .modal-footer div[style*="color: #666"],
[data-theme="dark"] .modal-footer[style*="background"] div[style*="color"] {
  color: #cbd5e1 !important;
}

[data-theme="dark"] .modal-footer strong {
  color: #f1f5f9 !important;
}

/* Question count banner dark mode */
[data-theme="dark"] .modal-body div[style*="background: #e3f2fd"] {
  background: #1e3a5f !important;
  border-color: #2563eb !important;
}

[data-theme="dark"] .modal-body div[style*="background: #e3f2fd"] span {
  color: #93c5fd !important;
}

[data-theme="dark"] .modal-body div[style*="background: #e3f2fd"] span[style*="color: #1976d2"] {
  color: #93c5fd !important;
}

/* Questions list container dark mode */
[data-theme="dark"] .modal-body div[style*="background: white"] {
  background: #0f172a !important;
  border-color: #334155 !important;
}

/* Individual question item background dark mode */
[data-theme="dark"] .modal-body div[style*="background: transparent"] {
  background: transparent !important;
}

/* Selected question background - HIGHLY VISIBLE */
[data-theme="dark"] .modal-body div[style*="background: #f0f8ff"] {
  background: #1e3a5f !important;
  border-left: 3px solid #667eea !important;
}

/* Question text color dark mode */
[data-theme="dark"] .modal-body div[style*="color: #333"] {
  color: #f1f5f9 !important;
}

/* Question metadata color dark mode */
[data-theme="dark"] .modal-body div[style*="color: #666"] {
  color: #94a3b8 !important;
}

[data-theme="dark"] .modal-body div[style*="color: #666"] span {
  color: #94a3b8 !important;
}

[data-theme="dark"] .modal-body div[style*="color: #666"] strong {
  color: #cbd5e1 !important;
}

/* Border between questions dark mode */
[data-theme="dark"] .modal-body div[style*="borderBottom"][style*="#f0f0f0"] {
  border-bottom-color: #1e293b !important;
}

/* Filter section labels dark mode */
[data-theme="dark"] .modal-body label[style*="fontWeight"] {
  color: #f1f5f9 !important;
}

/* Select dropdowns in dark mode */
[data-theme="dark"] .modal-body select {
  background-color: #0f172a !important;
  color: #f1f5f9 !important;
  border-color: #334155 !important;
}

[data-theme="dark"] .modal-body select:hover {
  border-color: #475569 !important;
}

[data-theme="dark"] .modal-body select:focus {
  border-color: #667eea !important;
  outline: none !important;
  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2) !important;
}

[data-theme="dark"] .modal-body select option {
  background-color: #0f172a !important;
  color: #f1f5f9 !important;
}

/* Buttons in question count header - dark mode */
[data-theme="dark"] .modal-body button[style*="background: #28a745"] {
  background: #16a34a !important;
  color: #ffffff !important;
  border: 1px solid #16a34a !important;
}

[data-theme="dark"] .modal-body button[style*="background: #28a745"]:hover {
  background: #15803d !important;
  box-shadow: 0 2px 8px rgba(22, 163, 74, 0.3) !important;
}

[data-theme="dark"] .modal-body button[style*="background: #dc3545"] {
  background: #dc2626 !important;
  color: #ffffff !important;
  border: 1px solid #dc2626 !important;
}

[data-theme="dark"] .modal-body button[style*="background: #dc3545"]:hover {
  background: #b91c1c !important;
  box-shadow: 0 2px 8px rgba(220, 38, 38, 0.3) !important;
}

/* Modal header dark mode */
[data-theme="dark"] .modal[style*="1050"] .modal-header {
  background: #1e293b !important;
  border-bottom-color: #334155 !important;
}

[data-theme="dark"] .modal[style*="1050"] .modal-header h3 {
  color: #f1f5f9 !important;
}

/* Close button in header dark mode */
[data-theme="dark"] .modal[style*="1050"] .modal-header .btn-close {
  color: #cbd5e1 !important;
}

[data-theme="dark"] .modal[style*="1050"] .modal-header .btn-close:hover {
  color: #f1f5f9 !important;
  background: rgba(255, 255, 255, 0.1) !important;
}

/* Modal content background dark mode */
[data-theme="dark"] .modal[style*="1050"] .modal-content {
  background: #0f172a !important;
  border-color: #334155 !important;
}

/* Modal body background dark mode */
[data-theme="dark"] .modal[style*="1050"] .modal-body {
  background: #0f172a !important;
}

/* Empty state messages dark mode (already defined but ensuring coverage) */
[data-theme="dark"] .modal-body div[style*="textAlign: 'center'"] h4 {
  color: #f1f5f9 !important;
}

[data-theme="dark"] .modal-body div[style*="textAlign: 'center'"] p {
  color: #94a3b8 !important;
}

/* ================================================================
   21. CHECKBOX CONTAINER HOVER STATE
   ================================================================ */

/* Question row hover effect in dark mode */
[data-theme="dark"] .modal-body > div > div > div > div:hover {
  background: rgba(30, 41, 59, 0.5) !important;
}

/* Selected question row hover in dark mode */
[data-theme="dark"] .modal-body > div > div > div > div[style*="background: #f0f8ff"]:hover {
  background: #2d4a75 !important;
}

/* ================================================================
   22. ULTRA HIGH CONTRAST FOR CHECKBOXES
   ================================================================ */

/* Make sure checkboxes are ALWAYS visible in dark mode */
[data-theme="dark"] input[type="checkbox"] {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  width: 18px !important;
  height: 18px !important;
  border: 2px solid #667eea !important;
  border-radius: 4px !important;
  background-color: #1e293b !important;
  cursor: pointer !important;
  position: relative !important;
  transition: all 0.2s ease !important;
  flex-shrink: 0 !important;
}

[data-theme="dark"] input[type="checkbox"]:hover {
  border-color: #818cf8 !important;
  box-shadow: 0 0 8px rgba(129, 140, 248, 0.4) !important;
  background-color: #2d3b50 !important;
}

[data-theme="dark"] input[type="checkbox"]:checked {
  background-color: #667eea !important;
  border-color: #818cf8 !important;
  box-shadow: 0 0 12px rgba(129, 140, 248, 0.6) !important;
}

[data-theme="dark"] input[type="checkbox"]:checked::after {
  content: '✓' !important;
  position: absolute !important;
  top: 50% !important;
  left: 50% !important;
  transform: translate(-50%, -50%) !important;
  color: #ffffff !important;
  font-size: 14px !important;
  font-weight: bold !important;
  line-height: 1 !important;
}

[data-theme="dark"] input[type="checkbox"]:focus {
  outline: none !important;
  border-color: #818cf8 !important;
  box-shadow: 0 0 0 3px rgba(129, 140, 248, 0.3) !important;
}

/* ================================================================
   23. FIX CHECKBOX CONTAINER BACKGROUND WHEN CHECKED
   ================================================================ */

/* Prevent checkbox container from becoming white when checked */
[data-theme="dark"] .modal-body input[type="checkbox"] {
  background-color: #1e293b !important;
}

[data-theme="dark"] .modal-body input[type="checkbox"]:checked {
  background-color: #667eea !important;
}

/* Ensure parent div of checkbox stays dark when question is selected */
[data-theme="dark"] .modal-body > div > div > div > div[style*="background"] {
  background-color: transparent !important;
}

[data-theme="dark"] .modal-body > div > div > div > div[style*="background: #f0f8ff"] {
  background: #1e3a5f !important;
  border-left: 3px solid #667eea !important;
}

/* Force the entire selected question row to stay dark */
[data-theme="dark"] .modal-body div[style*="display: flex"][style*="background"] {
  background: transparent !important;
}

[data-theme="dark"] .modal-body div[style*="display: flex"][style*="background: #f0f8ff"] {
  background: #1e3a5f !important;
}

/* Specifically target the checkbox wrapper area */
[data-theme="dark"] .modal-body div[style*="padding: 1rem"] input[type="checkbox"] {
  background-color: #1e293b !important;
}

[data-theme="dark"] .modal-body div[style*="padding: 1rem"] input[type="checkbox"]:checked {
  background-color: #667eea !important;
}

/* Nuclear option - force ALL divs containing checkboxes to stay dark */
[data-theme="dark"] .modal[style*="1050"] div:has(> input[type="checkbox"]) {
  background-color: transparent !important;
}

[data-theme="dark"] .modal[style*="1050"] div:has(> input[type="checkbox"]:checked) {
  background-color: transparent !important;
}

/* ================================================================
   24. AGGRESSIVE ANTI-WHITE BACKGROUND RULES FOR CHECKED STATE
   ================================================================ */

/* Target the question row when selected - keep it dark blue */
[data-theme="dark"] .modal-body > div > div > div > div {
  background: transparent !important;
}

[data-theme="dark"] .modal-body > div > div > div > div[style*="#f0f8ff"] {
  background: #1e3a5f !important;
  border-left: 3px solid #667eea !important;
}

/* Prevent ANY white background in the modal body */
[data-theme="dark"] .modal-body div[style*="background: white"],
[data-theme="dark"] .modal-body div[style*="background: #fff"],
[data-theme="dark"] .modal-body div[style*="background: #ffffff"],
[data-theme="dark"] .modal-body div[style*="background: rgb(255, 255, 255)"],
[data-theme="dark"] .modal-body div[style*="background: rgb(255,255,255)"] {
  background: #0f172a !important;
}

/* Specifically for the selected state light blue */
[data-theme="dark"] .modal-body div[style*="background: #f0f8ff"],
[data-theme="dark"] .modal-body div[style*="background:#f0f8ff"],
[data-theme="dark"] .modal-body div[style*="background: rgb(240, 248, 255)"],
[data-theme="dark"] .modal-body div[style*="background: rgb(240,248,255)"] {
  background: #1e3a5f !important;
  border-left: 3px solid #667eea !important;
}

/* Force the checkbox itself to never be white */
[data-theme="dark"] .modal-body input[type="checkbox"],
[data-theme="dark"] .modal input[type="checkbox"],
[data-theme="dark"] input[type="checkbox"] {
  background-color: #1e293b !important;
  background: #1e293b !important;
}

[data-theme="dark"] .modal-body input[type="checkbox"]:checked,
[data-theme="dark"] .modal input[type="checkbox"]:checked,
[data-theme="dark"] input[type="checkbox"]:checked {
  background-color: #667eea !important;
  background: #667eea !important;
}

/* Prevent light background on any flex container with checkbox */
[data-theme="dark"] .modal-body div[style*="display: flex"] {
  background-color: transparent !important;
}

[data-theme="dark"] .modal-body div[style*="display: flex"][style*="background: #f0f8ff"] {
  background-color: #1e3a5f !important;
}

/* Ultra aggressive - any div in modal body with bg should be dark or transparent */
[data-theme="dark"] .modal[style*="1050"] .modal-body > div > div > div > div[style] {
  background: transparent !important;
}

[data-theme="dark"] .modal[style*="1050"] .modal-body > div > div > div > div[style*="#f0f8ff"] {
  background: #1e3a5f !important;
}

/* Ensure the container of questions list is dark */
[data-theme="dark"] .modal-body > div > div > div[style*="overflowY"] {
  background: #0f172a !important;
}

[data-theme="dark"] .modal-body > div > div > div[style*="overflow-y"] {
  background: #0f172a !important;
}

/* Last resort - force EVERYTHING in the questions area to be dark */
[data-theme="dark"] .modal-body > div > div:last-child {
  background: #0f172a !important;
}

[data-theme="dark"] .modal-body > div > div:last-child > div {
  background: #0f172a !important;
}

[data-theme="dark"] .modal-body > div > div:last-child > div > div {
  background: transparent !important;
}

[data-theme="dark"] .modal-body > div > div:last-child > div > div[style*="#f0f8ff"] {
  background: #1e3a5f !important;
}

/* ================================================================
   END OF QUESTION SELECTION FIX
   ================================================================ */
